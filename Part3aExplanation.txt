From what I understand, the mprotect() statement in the code sets protection for the range parameters provided. Since we provide full access to the program on the location where the shell code is present, the program executes without any issues. However when we comment out the code, it does not have full access and hence the Segmentation error is thrown to indicate that access to the requested location cannot be provided.
